<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>카카오 지도 예제4</title>
    <link rel="stylesheet" type="text/css" href="./commons.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <style>
        .kakao-map {
            width: 100%;
            height: 300px;
        }
    </style>
    <!-- jquery cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- kakao map cdn -->
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=5708c1342b92b6b5dbc45942d5dbc923"></script>
    <script>
        $(function () {
            var mapContainer = document.querySelector(".kakao-map"), // 지도를 표시할 div 
                mapOption = {
                    center: new kakao.maps.LatLng(37.499002, 127.032842), // 지도의 중심 위치의 위도/경도
                    level: 1 // 지도 배율(1~15)
                };
            // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
            var map = new kakao.maps.Map(mapContainer, mapOption);

            //마커에 들어갈 이미지 설정
            var imgSrc = "./images/cute.gif";
            var imgSize = new kakao.maps.Size(64, 69);
            var imgOption = { offset: new kakao.maps.Point(27, 69) };

            var markerImage = new kakao.maps.MarkerImage(imgSrc, imgSize, imgOption);

            // KH 강남 지원에 마커 생성
            var marker = new kakao.maps.Marker({
                position: new kakao.maps.LatLng(37.499002, 127.032842),
                image: markerImage, //마커 이미지 설정
            });

            // 마커가 지도 위에 표시되도록 설정합니다(마커에 지도를 설정)
            marker.setMap(map);

            //마커가 드래그 가능하도록 설정합니다
            marker.setDraggable(true);
        
            //var infoText = "<b>표시할 내용</b>"; //HTML을 문자열로 설정(간편할 경우)
            //복잡할 경우는 템플릿으로 불러와서 설정
            // - 문제는 실제로 존재하는 영역이 없기 때문에 append() 등을 할 수가 없다는 것
            // - 문자열로 된 결과를 만들어 내야 함
            var origin = $("#info-template").text();
            var div = $("<div>").html(origin);//가짜 div를 생성하고 origin을 내부에 추가
            div.find(".name").text("KH정보교육원").css("font-size", "20px");
            div.find(".content").text("IT 교육기관")
            div.find(".link").attr("href", "https://kh-academy.co.kr");
            var infoText = div.html(); //가짜 div 내부의 내용을 불러와서 infoText에 저장

            var info = new kakao.maps.InfoWindow({
                position : new kakao.maps.LatLng(37.499002, 127.032842),
                content : infoText,
            });
            // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
            info.open(map, marker);
        });

    </script>

    <!-- 인포 윈도우에 표시할 HTML 코드를 템플릿으로 구현 -->
     <script type="text/template" id = "info-template">
            <div style = "text-align:center; padding:0.5em;">
                <div class = "name">상호명</div>
                <div class = "content">설명</div>
                <a class = "link">
                    <span>사이트로 이동</span>
                    <i class = "fa-solid fa-arrow-right"></i>
                </a>
            </div>
     </script>
</head>

<body>
    <div class="container w-600">
        <div class="cell center">
            <h1>인포 윈도우 생성</h1>
        </div>
        <div class="cell">
            <!-- 지도를 표시할 div 입니다 -->
            <div class="kakao-map"></div>
        </div>
    </div>

</body>

</html>
